{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 600,
  "height": 600,
  "params": [
      {
        "name": "Year_selection",
        "value": 2021,
        "bind": {
            "input": "range",
            "min": 2004,
            "max": 2021,
            "step": 1,
            "name": "Year:  "
        }
      }
  ],
  "layer": [
    {
      "data": {
      "url": "https://raw.githubusercontent.com/lemon040805/34003568_w10/refs/heads/main/data/2004-2021%20Number%20Of%20Addicts%20By%20Type%20Of%20Drugs%20Malay.csv"
    },
    "transform": [{ "filter": "datum.Year == Year_selection" },],
    "encoding": {
        "theta": {"field": "Value", "type": "quantitative" },
        "color": {
          "field": "Type of drug", 
          "type": "nominal",
          "scale":{
            "range": [
              "#e41a1c",
              "#984ea3",
              "#ff7f00",
              "#a6cee3",
              "#377eb8",
              "#a65628",
              "#f0e442"
            ]
          }
        }
    },
    "layer": [{
      "mark": {"type": "arc", "outerRadius": 80}
    }, {
      "mark": {"type": "text", "radius": 100},
      "encoding": {
        "text": {"field": "Type of drug", "type": "nominal"}
      }
      }]
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/lemon040805/34003568_w10/refs/heads/main/data/2004-2021%20Number%20Of%20Addicts%20By%20Type%20Of%20Drugs%20Malay.csv",
        "format": { "type": "csv" }
      },
      "transform": [
        { "filter": "datum.state == 'Terengganu' || datum.state == 'Perlis' || datum.state == 'Kelantan' || datum.state == 'Pulau Pinang' || datum.state == 'W.P. Kuala Lumpur' || datum.state == 'Kedah' ||  datum.state == 'Sabah'" }
      ],
      "mark": {
        "type": "text",
        "baseline": "middle",
        "fontSize": 11.5,
        "fontStyle": "italic"
      },
      "encoding": {
        "text": {"field": "state", "type": "nominal"},
        "longitude": { "field": "lon", "type": "quantitative" },
        "latitude": { "field": "lat", "type": "quantitative" },
        "color": {"value": "black"}
      }
    }
  ]
}
